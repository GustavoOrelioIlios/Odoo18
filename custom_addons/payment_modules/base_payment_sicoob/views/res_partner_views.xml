<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- Vista de formulário herdada para res.partner -->
        <record id="view_partner_form_inherited_sicoob" model="ir.ui.view">
            <field name="name">res.partner.form.inherited.sicoob</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="base.view_partner_form"/>
            <field name="arch" type="xml">
                <!-- Adiciona aba Sicoob após a aba Vendas & Compras -->
                <xpath expr="//page[@name='sales_purchases']" position="after">
                    <page string="Configurações Sicoob" name="sicoob_config" 
                          attrs="{'invisible': [('customer_rank', '=', 0)]}">
                        <group>
                            <group string="Configurações de Juros">
                                <field name="payment_interest_code"/>
                                <field name="payment_interest_percent" 
                                       attrs="{'invisible': [('payment_interest_code', 'not in', ['2'])],
                                              'required': [('payment_interest_code', 'in', ['2'])]}"
                                       string="Taxa Mensal (%)"
                                       help="Taxa mensal de juros em percentual (ex: 2.0 para 2% ao mês)"/>
                                <field name="payment_interest_value" 
                                       attrs="{'invisible': [('payment_interest_code', 'not in', ['1'])],
                                              'required': [('payment_interest_code', 'in', ['1'])]}"
                                       string="Valor por Dia (R$)"
                                       help="Valor fixo de juros por dia de atraso"/>
                                <field name="payment_interest_date_start" 
                                       attrs="{'invisible': [('payment_interest_code', '=', '3')],
                                              'required': [('payment_interest_code', '!=', '3')]}"
                                       string="Dias para Início"
                                       help="Número de dias após o vencimento para iniciar a cobrança de juros"/>
                            </group>
                            <group string="Configurações de Multa">
                                <field name="payment_penalty_code"/>
                                <field name="payment_penalty_percent" 
                                       attrs="{'invisible': [('payment_penalty_code', 'not in', ['2'])],
                                              'required': [('payment_penalty_code', 'in', ['2'])]}"
                                       string="Percentual da Multa (%)"
                                       help="Percentual de multa a ser aplicado sobre o valor do título"/>
                                <field name="payment_penalty_value" 
                                       attrs="{'invisible': [('payment_penalty_code', 'not in', ['1'])],
                                              'required': [('payment_penalty_code', 'in', ['1'])]}"
                                       string="Valor Fixo (R$)"
                                       help="Valor fixo da multa"/>
                                <field name="payment_penalty_date_start" 
                                       attrs="{'invisible': [('payment_penalty_code', '=', '0')],
                                              'required': [('payment_penalty_code', '!=', '0')]}"
                                       string="Dias para Início"
                                       help="Número de dias após o vencimento para aplicar a multa"/>
                            </group>
                        </group>
                        <group>
                            <div class="alert alert-info" role="alert">
                                <strong>Informação:</strong> Estas configurações serão aplicadas prioritariamente para boletos bancários deste cliente. 
                                Se algum campo não estiver preenchido, o sistema utilizará as configurações padrão do diário.
                            </div>
                        </group>
                    </page>
                </xpath>
            </field>
        </record>
    </data>
</odoo> 